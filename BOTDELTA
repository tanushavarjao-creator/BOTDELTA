delta-canis-bot/
â”œâ”€â”€ index.js
â”œâ”€â”€ languages.js
â”œâ”€â”€ faq_ai.js
â”œâ”€â”€ users.json
â”œâ”€â”€ package.json
â””â”€â”€ .gitignore

const { Client, LocalAuth } = require("whatsapp-web.js");
const qrcode = require("qrcode-terminal");
const fs = require("fs");
const languages = require("./languages");
const faqAI = require("./faq_ai");

let users = fs.existsSync("users.json")
  ? JSON.parse(fs.readFileSync("users.json"))
  : {};

const client = new Client({
  authStrategy: new LocalAuth()
});

client.on("qr", qr => {
  qrcode.generate(qr, { small: true });
  console.log("ğŸ“² Escaneie o QR Code com o WhatsApp Business");
});

client.on("ready", () => {
  console.log("ğŸ¤– DELTA CANIS BOT ONLINE");
});

client.on("message", message => {
  const id = message.from;
  const text = message.body.trim().toLowerCase();

  // NOVO USUÃRIO
  if (!users[id]) {
    users[id] = { lang: null };
    fs.writeFileSync("users.json", JSON.stringify(users, null, 2));

    return message.reply(
`ğŸŒ Elige tu idioma / Escolha o idioma:
1ï¸âƒ£ EspaÃ±ol
2ï¸âƒ£ PortuguÃªs`
    );
  }

  // DEFINIÃ‡ÃƒO DE IDIOMA
  if (!users[id].lang) {
    users[id].lang = text === "1" ? "es" : "pt";
    fs.writeFileSync("users.json", JSON.stringify(users, null, 2));

    const L = languages[users[id].lang];
    return message.reply(`${L.welcome}\n${L.menu}`);
  }

  const L = languages[users[id].lang];

  // CHAMADAS BÃSICAS
  if (["oi", "hola", "menu"].includes(text)) {
    return message.reply(`${L.welcome}\n${L.menu}`);
  }

  // MENU
  if (text === "1") return message.reply(`${L.catalog}\nğŸ‘‰ https://deltacanis.myshopify.com`);
  if (text === "2") return message.reply(L.payment);
  if (text === "3") return message.reply(L.order);
  if (text === "4") return message.reply(L.human);
  if (text === "5") return message.reply(L.delivery);
  if (text === "6") return message.reply(L.returns);

  // IA FAQ
  const aiResponse = faqAI(text, users[id].lang);
  if (aiResponse) return message.reply(aiResponse);
});

client.initialize();

module.exports = {
  es: {
    welcome: `ğŸº Bienvenido/a a *DELTA CANIS*

Somos una tienda online internacional que conecta tecnologÃ­a, innovaciÃ³n e inteligencia artificial para facilitar tus compras en Paraguay, Brasil y el mundo ğŸŒ.`,

    menu: `
ğŸ“‹ *MenÃº Principal*
1ï¸âƒ£ Ver catÃ¡logo online
2ï¸âƒ£ Formas de pago
3ï¸âƒ£ Seguimiento de pedido
4ï¸âƒ£ Hablar con un asesor
5ï¸âƒ£ Horarios y entregas
6ï¸âƒ£ Cambios y devoluciones`,

    catalog: "ğŸ›’ Accede a nuestro catÃ¡logo completo:",
    payment: `ğŸ’³ *Formas de pago*
âœ” Tarjeta de crÃ©dito/dÃ©bito
âœ” Transferencia bancaria
âœ” Pix (Brasil ğŸ‡§ğŸ‡·)
âœ” PayPal
âœ” Pagos en GuaranÃ­es (Gs), Reales (R$) y DÃ³lares (USD)
âœ” Checkout seguro Shopify`,

    order: "ğŸ“¦ EnvÃ­anos el nÃºmero de tu pedido. Ejemplo: #1045\nğŸ‘‰ https://deltacanis.myshopify.com/account",

    human: "ğŸ“ Un asesor de DELTA CANIS se comunicarÃ¡ contigo.",

    delivery: `ğŸšš *Entregas*
Plazo estimado: 5 a 15 dÃ­as hÃ¡biles, dependiendo del producto y su origen.`,

    returns: `ğŸ”„ *Cambios y devoluciones*

Solo se aceptan solicitudes por defectos de fabricaciÃ³n o divergencia del pedido.
La solicitud debe realizarse dentro del plazo informado por atenciÃ³n al cliente.
Cada caso es evaluado individualmente conforme a nuestras polÃ­ticas.`
  },

  pt: {
    welcome: `ğŸº Bem-vindo(a) Ã  *DELTA CANIS*

Somos uma loja online internacional que une tecnologia, inovaÃ§Ã£o e inteligÃªncia artificial para facilitar suas compras no Paraguai, Brasil e no mundo ğŸŒ.`,

    menu: `
ğŸ“‹ *Menu Principal*
1ï¸âƒ£ Ver catÃ¡logo online
2ï¸âƒ£ Formas de pagamento
3ï¸âƒ£ Status do pedido
4ï¸âƒ£ Falar com atendente
5ï¸âƒ£ HorÃ¡rios e entregas
6ï¸âƒ£ Trocas e devoluÃ§Ãµes`,

    catalog: "ğŸ›’ Acesse nosso catÃ¡logo completo:",
    payment: `ğŸ’³ *Formas de pagamento*
âœ” CartÃ£o de crÃ©dito/dÃ©bito
âœ” TransferÃªncia bancÃ¡ria
âœ” Pix (Brasil ğŸ‡§ğŸ‡·)
âœ” PayPal
âœ” Pagamentos em Guarani (Gs), Real (R$) e DÃ³lar (USD)
âœ” Checkout seguro Shopify`,

    order: "ğŸ“¦ Envie o nÃºmero do pedido. Exemplo: #1045\nğŸ‘‰ https://deltacanis.myshopify.com/account",

    human: "ğŸ“ Um atendente da DELTA CANIS falarÃ¡ com vocÃª.",

    delivery: `ğŸšš *Entregas*
Prazo estimado: 5 a 15 dias Ãºteis, conforme o produto e sua origem.`,

    returns: `ğŸ”„ *Trocas e devoluÃ§Ãµes*

Aceitas apenas em casos de defeito de fabricaÃ§Ã£o ou divergÃªncia do pedido.
A solicitaÃ§Ã£o deve ser feita dentro do prazo informado pelo atendimento.
Cada caso Ã© analisado individualmente conforme a polÃ­tica vigente.`
  }
};

module.exports = function faqAI(text, lang) {
  const t = text.toLowerCase();

  if (t.includes("entrega") || t.includes("envio") || t.includes("prazo")) {
    return lang === "es"
      ? "ğŸ“¦ El plazo de entrega es de 5 a 15 dÃ­as hÃ¡biles, segÃºn el producto y su origen."
      : "ğŸ“¦ O prazo de entrega Ã© de 5 a 15 dias Ãºteis, conforme o produto e sua origem.";
  }

  if (t.includes("pago") || t.includes("pix") || t.includes("paypal") || t.includes("cartÃ£o")) {
    return lang === "es"
      ? "ğŸ’³ Aceptamos tarjeta, transferencia, Pix (Brasil), PayPal y pagos en GuaranÃ­es, Reales y DÃ³lares."
      : "ğŸ’³ Aceitamos cartÃ£o, transferÃªncia, Pix (Brasil), PayPal e pagamentos em Guarani, Real e DÃ³lar.";
  }

  if (t.includes("horario") || t.includes("atendimento") || t.includes("atenciÃ³n")) {
    return lang === "es"
      ? "â° AtenciÃ³n: Lunes a Viernes de 08:00 a 18:00."
      : "â° Atendimento: Segunda a Sexta, das 08h Ã s 18h.";
  }

  return null;
};

{}

{
  "name": "delta-canis-bot",
  "version": "1.0.0",
  "description": "WhatsApp Bot DELTA CANIS",
  "main": "index.js",
  "scripts": {
    "start": "node index.js"
  },
  "dependencies": {
    "qrcode-terminal": "^0.12.0",
    "whatsapp-web.js": "^1.23.0"
  }
}

node_modules
.wwebjs_auth
.wwebjs_cache
users.json
